import type { FoodShelter, DayOfWeek } from '../types';

const CAMPUS_LAT = 44.94356;
const CAMPUS_LNG = -93.19163;

function haversineMi(lat1: number, lon1: number, lat2: number, lon2: number): number {
  const R = 3959;
  const dLat = (lat2 - lat1) * Math.PI / 180;
  const dLon = (lon2 - lon1) * Math.PI / 180;
  const a =
    Math.sin(dLat / 2) ** 2 +
    Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * Math.sin(dLon / 2) ** 2;
  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
  return Math.round(R * c * 10) / 10;
}

export const foodShelters: FoodShelter[] = [
  { id: 'keystone', name: 'Keystone Community Services', address: '1800 University Ave W', city: 'Saint Paul', state: 'MN', zip: '55104', lat: 44.955, lng: -93.178, distanceMiles: haversineMi(CAMPUS_LAT, CAMPUS_LNG, 44.955, -93.178), schedule: [{ day: 1 as DayOfWeek, slots: [{ open: '10:00', close: '12:00' }, { open: '14:00', close: '16:00' }] }, { day: 2 as DayOfWeek, slots: [{ open: '10:00', close: '12:00' }, { open: '14:00', close: '16:00' }] }, { day: 3 as DayOfWeek, slots: [{ open: '16:00', close: '18:00' }], note: 'Wed: evening only' }, { day: 4 as DayOfWeek, slots: [{ open: '10:00', close: '12:00' }, { open: '14:00', close: '16:00' }] }, { day: 5 as DayOfWeek, slots: [{ open: '10:00', close: '12:00' }, { open: '14:00', close: '16:00' }] }], mealTimes: 'Food distribution during open hours; first-come, first-served.', eligibility: 'Establish need for emergency food; no specific income requirement. Service once per month. No appointment required.', contact: '651-917-3792', website: 'https://keystoneservices.org/food-shelf/', notes: 'Between Wendy\'s and Arby\'s at Fairview and University. Foodmobile available for transportation barriers.' },
  { id: 'hallie-q-brown', name: 'Hallie Q. Brown Community Center', address: '270 Kent St', city: 'Saint Paul', state: 'MN', zip: '55102', lat: 44.938, lng: -93.125, distanceMiles: haversineMi(CAMPUS_LAT, CAMPUS_LNG, 44.938, -93.125), schedule: [{ day: 1 as DayOfWeek, slots: [{ open: '09:00', close: '12:00' }] }, { day: 3 as DayOfWeek, slots: [{ open: '09:00', close: '12:00' }] }, { day: 5 as DayOfWeek, slots: [{ open: '09:00', close: '12:00' }] }], mealTimes: 'Pantry pick-up during open hours.', eligibility: 'Serves Ramsey County residents. ID and proof of address may be required.', contact: '651-224-4601', website: 'https://www.hallieqbrown.org/' },
  { id: 'open-hands-midway', name: 'Open Hands Midway', address: '436 Roy St N', city: 'Saint Paul', state: 'MN', zip: '55104', lat: 44.962, lng: -93.168, distanceMiles: haversineMi(CAMPUS_LAT, CAMPUS_LNG, 44.962, -93.168), schedule: [{ day: 2 as DayOfWeek, slots: [{ open: '10:00', close: '14:00' }] }, { day: 4 as DayOfWeek, slots: [{ open: '10:00', close: '14:00' }] }], mealTimes: 'Distribution 10am–2pm on open days.', eligibility: 'Open to community; income guidelines may apply. Call ahead recommended.' },
  { id: 'neighbors-inc', name: 'Neighbors, Inc.', address: '222 Grand Ave W', city: 'South Saint Paul', state: 'MN', zip: '55075', lat: 44.892, lng: -93.042, distanceMiles: haversineMi(CAMPUS_LAT, CAMPUS_LNG, 44.892, -93.042), schedule: [{ day: 1 as DayOfWeek, slots: [{ open: '09:00', close: '15:00' }] }, { day: 2 as DayOfWeek, slots: [{ open: '09:00', close: '15:00' }] }, { day: 3 as DayOfWeek, slots: [{ open: '09:00', close: '15:00' }] }, { day: 4 as DayOfWeek, slots: [{ open: '09:00', close: '15:00' }] }, { day: 5 as DayOfWeek, slots: [{ open: '09:00', close: '12:00' }] }], mealTimes: 'Food shelf hours as listed; hot meals on select days—call for schedule.', eligibility: 'Serves Dakota County: South St. Paul, West St. Paul, Inver Grove Heights, Mendota Heights, Sunfish Lake. Proof of address required.', contact: '651-455-1502', website: 'https://www.neighborsinc.org/' },
  { id: 'franciscan-brothers', name: 'Franciscan Brothers of Peace', address: '1289 Lafond Ave', city: 'Saint Paul', state: 'MN', zip: '55104', lat: 44.958, lng: -93.114, distanceMiles: haversineMi(CAMPUS_LAT, CAMPUS_LNG, 44.958, -93.114), schedule: [{ day: 2 as DayOfWeek, slots: [{ open: '10:00', close: '13:00' }] }, { day: 5 as DayOfWeek, slots: [{ open: '10:00', close: '13:00' }] }], mealTimes: 'Food distribution during open hours.', eligibility: 'Community food shelf; walk-ins welcome. No appointment required.' },
  { id: 'focus-house', name: 'FOCUS House', address: '550 Rice St', city: 'Saint Paul', state: 'MN', zip: '55103', lat: 44.952, lng: -93.098, distanceMiles: haversineMi(CAMPUS_LAT, CAMPUS_LNG, 44.952, -93.098), schedule: [{ day: 0 as DayOfWeek, slots: [{ open: '11:00', close: '14:00' }], note: 'Sunday meal' }, { day: 1 as DayOfWeek, slots: [{ open: '08:00', close: '16:00' }] }, { day: 2 as DayOfWeek, slots: [{ open: '08:00', close: '16:00' }] }, { day: 3 as DayOfWeek, slots: [{ open: '08:00', close: '16:00' }] }, { day: 4 as DayOfWeek, slots: [{ open: '08:00', close: '16:00' }] }, { day: 5 as DayOfWeek, slots: [{ open: '08:00', close: '12:00' }] }], mealTimes: 'Meals and pantry available during operating hours; Sunday 11am–2pm meal service.', eligibility: 'Serves individuals and families in need. ID helpful but not always required.', contact: '651-224-9644' },
  { id: 'frogtown-na', name: 'Frogtown Neighborhood Association', address: '501 Dale St N', city: 'Saint Paul', state: 'MN', zip: '55103', lat: 44.956, lng: -93.120, distanceMiles: haversineMi(CAMPUS_LAT, CAMPUS_LNG, 44.956, -93.120), schedule: [{ day: 3 as DayOfWeek, slots: [{ open: '12:00', close: '15:00' }] }, { day: 6 as DayOfWeek, slots: [{ open: '10:00', close: '13:00' }] }], mealTimes: 'Pantry and produce during open hours.', eligibility: 'Frogtown/Thomas-Dale area focus; community members welcome. Proof of address may be requested.' },
  { id: 'open-cupboard', name: 'Open Cupboard', address: '7040 10th St N', city: 'Oakdale', state: 'MN', zip: '55128', lat: 45.018, lng: -92.958, distanceMiles: haversineMi(CAMPUS_LAT, CAMPUS_LNG, 45.018, -92.958), schedule: [{ day: 1 as DayOfWeek, slots: [{ open: '13:00', close: '17:00' }] }, { day: 3 as DayOfWeek, slots: [{ open: '13:00', close: '17:00' }] }, { day: 5 as DayOfWeek, slots: [{ open: '09:00', close: '12:00' }] }], mealTimes: 'Food distribution during listed hours.', eligibility: 'Serves Washington County: Oakdale, Woodbury, Landfall, South Maplewood. Photo ID and proof of residency required.', contact: '651-738-0732', website: 'https://www.opencupboard.org/' },
  { id: 'ihelp-market', name: 'iHelp Market Square', address: '900 Dale St N', city: 'Saint Paul', state: 'MN', zip: '55103', lat: 44.954, lng: -93.118, distanceMiles: haversineMi(CAMPUS_LAT, CAMPUS_LNG, 44.954, -93.118), schedule: [{ day: 2 as DayOfWeek, slots: [{ open: '10:00', close: '14:00' }] }, { day: 4 as DayOfWeek, slots: [{ open: '10:00', close: '14:00' }] }], mealTimes: 'Market-style distribution during hours.', eligibility: 'Community food access; no appointment needed. May serve by zip code—call to confirm.' },
  { id: 'more-food-shelf', name: 'MORE (Midway and Beyond)', address: '96 Wheelock Pkwy E', city: 'Saint Paul', state: 'MN', zip: '55117', lat: 44.982, lng: -93.102, distanceMiles: haversineMi(CAMPUS_LAT, CAMPUS_LNG, 44.982, -93.102), schedule: [{ day: 1 as DayOfWeek, slots: [{ open: '09:00', close: '12:00' }] }, { day: 3 as DayOfWeek, slots: [{ open: '15:00', close: '18:00' }] }, { day: 5 as DayOfWeek, slots: [{ open: '09:00', close: '12:00' }] }], mealTimes: 'Food shelf hours as listed.', eligibility: 'Serves Midway and surrounding areas. Proof of address may be required.', contact: '651-646-8835', website: 'https://www.morefoodshelf.org/' },
].sort((a, b) => a.distanceMiles - b.distanceMiles);

export const DAY_NAMES = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'] as const;
export const DAY_SHORT = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'] as const;
